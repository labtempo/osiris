/*C3*/SET SCHEMA PUBLIC
alter table Collector drop constraint FK_crukbjo3rb5ke82cbod31xm2g
alter table Collector_info drop constraint FK_qyc0vsbdbsvwkpi0p9xl1aumv
alter table Consumable_rules drop constraint FK_rljrbdrerhfx4dopunmw5yx4d
alter table Network_info drop constraint FK_jk5uh4du8219s5jm1bl001pmt
alter table Sensor drop constraint FK_bk6vwthk3ugotnxr5ujbktlgw
alter table Sensor drop constraint FK_k9aw5te49rl8mlkq8374a57ku
alter table Sensor_SENSOR_CONSUMABLE drop constraint FK_d9p83g56dy9j38xc8775m12av
alter table Sensor_SENSOR_CONSUMABLE drop constraint FK_gqo2faerbumtppqeakkt16tqg
alter table Sensor_info drop constraint FK_wf8r3rteiiuk1yf2h76m8x9j
alter table Sensor_values drop constraint FK_7gsx1agr9xcqhlh28ut9xavkd
drop table Collector if exists
drop table Collector_info if exists
drop table Consumable_rules if exists
drop table Network if exists
drop table Network_info if exists
drop table SENSOR_CONSUMABLE if exists
drop table Sensor if exists
drop table Sensor_SENSOR_CONSUMABLE if exists
drop table Sensor_info if exists
drop table Sensor_values if exists
create table Collector (cid bigint generated by default as identity (start with 1), lastModified timestamp, state varchar(255), id varchar(255), network_id varchar(255), primary key (cid))
create table Collector_info (Collector_cid bigint not null, info varchar(255), info_KEY varchar(255), primary key (Collector_cid, info_KEY))
create table Consumable_rules (Consumable_id bigint not null, message varchar(255), name varchar(255), operator varchar(255), value integer not null)
create table Network (id varchar(255) not null, lastModified timestamp, state varchar(255), primary key (id))
create table Network_info (Network_id varchar(255) not null, info varchar(255), info_KEY varchar(255), primary key (Network_id, info_KEY))
create table SENSOR_CONSUMABLE (id bigint generated by default as identity (start with 1), name varchar(255), val integer not null, primary key (id))
create table Sensor (sid bigint generated by default as identity (start with 1), lastModified timestamp, state varchar(255), id varchar(255), timestamp bigint not null, collector_cid bigint, network_id varchar(255), primary key (sid))
create table Sensor_SENSOR_CONSUMABLE (Sensor_sid bigint not null, consumables_id bigint not null)
create table Sensor_info (Sensor_sid bigint not null, info varchar(255), info_KEY varchar(255), primary key (Sensor_sid, info_KEY))
create table Sensor_values (Sensor_sid bigint not null, name varchar(255), symbol varchar(255), type varchar(255), unit varchar(255), value varchar(255))
alter table Sensor_SENSOR_CONSUMABLE add constraint UK_d9p83g56dy9j38xc8775m12av  unique (consumables_id)
alter table Collector add constraint FK_crukbjo3rb5ke82cbod31xm2g foreign key (network_id) references Network
alter table Collector_info add constraint FK_qyc0vsbdbsvwkpi0p9xl1aumv foreign key (Collector_cid) references Collector
alter table Consumable_rules add constraint FK_rljrbdrerhfx4dopunmw5yx4d foreign key (Consumable_id) references SENSOR_CONSUMABLE
alter table Network_info add constraint FK_jk5uh4du8219s5jm1bl001pmt foreign key (Network_id) references Network
alter table Sensor add constraint FK_bk6vwthk3ugotnxr5ujbktlgw foreign key (collector_cid) references Collector
alter table Sensor add constraint FK_k9aw5te49rl8mlkq8374a57ku foreign key (network_id) references Network
alter table Sensor_SENSOR_CONSUMABLE add constraint FK_d9p83g56dy9j38xc8775m12av foreign key (consumables_id) references SENSOR_CONSUMABLE
alter table Sensor_SENSOR_CONSUMABLE add constraint FK_gqo2faerbumtppqeakkt16tqg foreign key (Sensor_sid) references Sensor
alter table Sensor_info add constraint FK_wf8r3rteiiuk1yf2h76m8x9j foreign key (Sensor_sid) references Sensor
alter table Sensor_values add constraint FK_7gsx1agr9xcqhlh28ut9xavkd foreign key (Sensor_sid) references Sensor
INSERT INTO NETWORK VALUES('labtempo','2014-10-24 17:07:54.838000','NEW')
INSERT INTO COLLECTOR VALUES(1,'2014-10-24 17:07:54.838000','NEW','lab','labtempo')
INSERT INTO SENSOR VALUES(1,'2014-10-24 17:07:54.838000','NEW','1',1414177674558,1,'labtempo')
INSERT INTO SENSOR_CONSUMABLE VALUES(1,'batrery',75)
INSERT INTO NETWORK_INFO VALUES('labtempo','TinyOS','OS')
INSERT INTO NETWORK_INFO VALUES('labtempo','br.uff.ic','domain')
INSERT INTO NETWORK_INFO VALUES('labtempo','wireless','type')
INSERT INTO COLLECTOR_INFO VALUES(1,'2','numero')
INSERT INTO COLLECTOR_INFO VALUES(1,'sala do laboratorio','descricao')
INSERT INTO SENSOR_INFO VALUES(1,'valor2','chave2')
INSERT INTO SENSOR_INFO VALUES(1,'valor','chave')
INSERT INTO SENSOR_SENSOR_CONSUMABLE VALUES(1,1)
INSERT INTO SENSOR_VALUES VALUES(1,'temperature','\u00b0C','real','celsius','35.5')
INSERT INTO SENSOR_VALUES VALUES(1,'luminosity','cd','real','candela','200.0')
INSERT INTO SENSOR_VALUES VALUES(1,'battery','V','integer','volt','50')
COMMIT
